import{U as B,q as M,f as x,b as S}from"./index.feaeb45b.js";import{C as H}from"./CreateOperate.0022555e.js";import{M as I}from"./markdown-it.b78612f4.js";import{m as O}from"./markdown-it-katex.9105f420.js";import{P as v}from"./prismjs.42fd26d0.js";import{u as b}from"./useOperate.5b1521cf.js";import{o as D,a as L,d as T,aI as l,a7 as y,r as N,y as w,a8 as m,u as i,a5 as _,Q as k,X as R,ae as P,a6 as C,N as $,aP as V}from"./@vue.54607f99.js";const A=()=>{const n=(a,t,s)=>`<div class="pre-code"><div class="pre-code-header"><span class="code-header-lang">${t}</span><span class="code-header-copy ${s.value?"hide":""}"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_387_10514)">
        <path d="M11.3333 9.99935H14C14.7364 9.99935 15.3333 9.4024 15.3333 8.66602V1.99935C15.3333 1.26297 14.7364 0.666016 14 0.666016H7.33333C6.59695 0.666016 6 1.26297 6 1.99935V4.66602" stroke="#2A3048" stroke-width="1.33333"/>
        <rect x="0.666748" y="6" width="9.33333" height="9.33333" rx="1.33333" stroke="#2A3048" stroke-width="1.33333"/>
        </g>
        <defs>
        <clipPath id="clip0_387_10514">
        <rect width="16" height="16" fill="white"/>
        </clipPath>
        </defs>
        </svg></span></div><div class="pre-code-body ${t}">${a}</div></div>`,c=a=>{const t=I({html:!0,linkify:!0,highlight(r,e){var f;const d=(f=v.languages[e])!=null?f:v.languages.text,u=v.highlight(r,d,e);return n(u,e!=null?e:"",a)}}).use(O),s=(r,e,d)=>(r[e].tag="ul",t.renderer.renderToken(r,e,d)),p=(r,e,d)=>r[e].info&&r[e+1]&&r[e+1].hidden&&r[e+1].tag==="p"?`<li>${r[e].info}${r[e].markup}  `:t.renderer.renderToken(r,e,d),g=(r,e,d)=>{if(!r[e].hidden&&r[e-1]&&r[e-1].tag==="li"&&r[e-1].info){const{info:u,markup:f}=r[e-1];return`<p>${u}${f}  `}else return t.renderer.renderToken(r,e,d)};return t.renderer.rules.ordered_list_open=s,t.renderer.rules.ordered_list_close=s,t.renderer.rules.list_item_open=p,t.renderer.rules.paragraph_open=g,t},o=a=>{for(;!Array.from(a.classList).includes("pre-code");)a=a.parentNode;return a||null},h=a=>{if(Array.from(a.target.classList).includes("code-header-copy")){const s=o(a.target).querySelector(".pre-code-body"),{handleCopy:p}=b();p(s)}};return D(()=>{document.addEventListener("click",h)}),L(()=>{document.removeEventListener("click",h)}),{createMarkdown:c}},q=["innerHTML"],E=T({__name:"Markdown",props:{isHide:{type:Boolean,default:!0},content:{type:String,default:""}},setup(n){const c=n,{createMarkdown:o}=A(),h=o(c.isHide),a=t=>{try{t=JSON.parse(`"${t}"`)}catch{t=t.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\u003e/g,">").replace(/\\u003c/g,"<")}return h.render(t)};return(t,s)=>(l(),y("div",{class:"markdown",innerHTML:a(n.content)},null,8,q))}}),F={class:"header-icon"},U={class:"chat-item"},G={class:"chat-time"},j=["textContent"],z=T({__name:"ChatItem",props:{data:{type:Object,default:()=>({})},index:{type:Number,default:0},hasDelete:{type:Boolean,default:!0},hasRefresh:{type:Boolean,default:!0}},emits:["favorite","copy","delete","refresh"],setup(n,{emit:c}){const o=n,h=N(null),a=w(()=>o.data.send_id==="1"),t=w(()=>o.data.noOperateStatus?o.data.noOperateStatus:!1),s=()=>{c("favorite",o.data,o.index)},p=e=>{e=e!=null?e:h.value.querySelector(".chat-text"),c("copy",e)},g=()=>{c("delete",o.data,o.index)},r=()=>{c("refresh",o.index)};return(e,d)=>{const u=x;return l(),y("div",{ref_key:"chatGroundRef",ref:h,class:$(["chat-ground",i(a)?"left":"right"])},[m("div",F,[i(a)?(l(),_(u,{key:0,"custom-style":!1,icon:"chat-robot"})):(l(),_(B,{key:1}))]),m("div",U,[m("p",G,[m("span",null,k(i(M)(n.data.create_at)),1),i(a)?(l(),y(R,{key:0},[P(k(e.$t("chat.aiText")),1)],64)):C("",!0)]),m("div",{class:$(["chat-text",i(a)?"extra-purple":"extra-grey"])},[i(a)?(l(),_(E,{key:0,"is-hide":i(t),content:n.data.content},null,8,["is-hide","content"])):(l(),y("div",{key:1,textContent:k(n.data.content)},null,8,j)),V(e.$slots,"loading",{},void 0,!0)],2),i(a)&&!n.data.noOperateStatus?(l(),_(H,{key:0,"class-name":"chat-operate","is-collection":Boolean(n.data.collection_type),"has-edit-op":!1,"has-delete":o.hasDelete,"has-refresh":o.hasRefresh,onToFavorite:s,onToCopy:p,onToDelete:g,onToRefresh:r},null,8,["is-collection","has-delete","has-refresh"])):C("",!0)])],2)}}});const ee=S(z,[["__scopeId","data-v-c4f77a69"]]);export{ee as C};
