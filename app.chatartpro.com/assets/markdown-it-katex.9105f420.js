import{k as d}from"./katex.c592c5f9.js";var m=d;function p(r,e){var n,i,l=r.posMax,o=!0,c=!0;return n=e>0?r.src.charCodeAt(e-1):-1,i=e+1<=l?r.src.charCodeAt(e+1):-1,(n===32||n===9||i>=48&&i<=57)&&(c=!1),(i===32||i===9)&&(o=!1),{can_open:o,can_close:c}}function $(r,e){var n,i,l,o,c;if(r.src[r.pos]!=="$")return!1;if(o=p(r,r.pos),!o.can_open)return e||(r.pending+="$"),r.pos+=1,!0;for(n=r.pos+1,i=n;(i=r.src.indexOf("$",i))!==-1;){for(c=i-1;r.src[c]==="\\";)c-=1;if((i-c)%2==1)break;i+=1}return i===-1?(e||(r.pending+="$"),r.pos=n,!0):i-n===0?(e||(r.pending+="$$"),r.pos=n+1,!0):(o=p(r,i),o.can_close?(e||(l=r.push("math_inline","math",0),l.markup="$",l.content=r.src.slice(n,i)),r.pos=i+1,!0):(e||(r.pending+="$"),r.pos=n,!0))}function x(r,e,n,i){var l,o,c,u,f=!1,k,a=r.bMarks[e]+r.tShift[e],h=r.eMarks[e];if(a+2>h||r.src.slice(a,a+2)!=="$$")return!1;if(a+=2,l=r.src.slice(a,h),i)return!0;for(l.trim().slice(-2)==="$$"&&(l=l.trim().slice(0,-2),f=!0),c=e;!f&&(c++,!(c>=n||(a=r.bMarks[c]+r.tShift[c],h=r.eMarks[c],a<h&&r.tShift[c]<r.blkIndent)));)r.src.slice(a,h).trim().slice(-2)==="$$"&&(u=r.src.slice(0,h).lastIndexOf("$$"),o=r.src.slice(a,u),f=!0);return r.line=c+1,k=r.push("math_block","math",0),k.block=!0,k.content=(l&&l.trim()?l+`
`:"")+r.getLines(e+1,c,r.tShift[e],!0)+(o&&o.trim()?o:""),k.map=[e,r.line],k.markup="$$",!0}var _=function(e,n){n=n||{};var i=function(u){n.displayMode=!1;try{return m.renderToString(u,n)}catch(f){return n.throwOnError&&console.log(f),u}},l=function(u,f){return i(u[f].content)},o=function(u){n.displayMode=!0;try{return"<p>"+m.renderToString(u,n)+"</p>"}catch(f){return n.throwOnError&&console.log(f),u}},c=function(u,f){return o(u[f].content)+`
`};e.inline.ruler.after("escape","math_inline",$),e.block.ruler.after("blockquote","math_block",x,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=l,e.renderer.rules.math_block=c};export{_ as m};
